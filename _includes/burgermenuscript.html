<script defer>
  const burgerMenuIcon = document.getElementById('burger-menu-icon');
  const mobileMenu = document.getElementById('mobile-menu');
  const closeIcon = document.getElementById('close-icon');
  const themeIconSun = document.getElementById('theme-icon-sun');
  const themeIconMoon = document.getElementById('theme-icon-moon');
  const languageIconPT = document.getElementById('language-icon-pt');
  const languageIconEN = document.getElementById('language-icon-en');
  const BBGpreferredTheme = localStorage.getItem('BBGpreferredTheme');
  const BBGpreferredLanguage = localStorage.getItem('BBGpreferredLanguage');

  const initThemesAndLanguages = () => {
    if (BBGpreferredTheme === 'dark') {
      // Dark mode is preferred
      document.documentElement.setAttribute('data-theme', 'dark');
      localStorage.setItem('BBGpreferredTheme', 'dark');
      try {
        themeIconMoon.classList.add('active');
        themeIconSun.classList.remove('active');
      } catch {}
    } else if (BBGpreferredTheme === 'light') {
      // Light mode is preferred
      document.documentElement.setAttribute('data-theme', 'light');
      localStorage.setItem('BBGpreferredTheme', 'light');
      try {
        themeIconSun.classList.add('active');
        themeIconMoon.classList.remove('active');
      } catch {}
    } else {
      // No preference found, set a default theme
      document.documentElement.setAttribute('data-theme', 'light');
      localStorage.setItem('BBGpreferredTheme', 'light');
      try {
        themeIconSun.classList.add('active');
        themeIconMoon.classList.remove('active');
      } catch {}
    }

    // Language
    if (BBGpreferredLanguage === 'pt') {
      // Mudar alguma coisa no global que mude o idioma
      try {
        languageIconPT.classList.add('active');
        languageIconEN.classList.remove('active');
      } catch {}
    } else if (BBGpreferredLanguage === 'en') {
      // Mudar alguma coisa no global que mude o idioma
      try {
        languageIconPT.classList.remove('active');
        languageIconEN.classList.add('active');
      } catch {}
    } else {
      // No preference found, set a default language (EN)
      try {
        languageIconEN.classList.add('active');
        languageIconPT.classList.remove('active');
      } catch {}
    }
  };

  const setDarkTheme = () => {
    document.documentElement.setAttribute('data-theme', 'dark');
    localStorage.setItem('BBGpreferredTheme', 'dark');
    themeIconMoon.classList.add('active');
    themeIconSun.classList.remove('active');
  };

  const setLightTheme = () => {
    document.documentElement.setAttribute('data-theme', 'light');
    localStorage.setItem('BBGpreferredTheme', 'light');
    themeIconSun.classList.add('active');
    themeIconMoon.classList.remove('active');
  };

  const setLanguagePT = () => {
    localStorage.setItem('BBGpreferredLanguage', 'pt');
    languageIconPT.classList.add('active');
    languageIconEN.classList.remove('active');
    location.reload();
  };

  const setLanguageEN = () => {
    localStorage.setItem('BBGpreferredLanguage', 'en');
    languageIconEN.classList.add('active');
    languageIconPT.classList.remove('active');
    location.reload();
  };

  themeIconSun.addEventListener('click', () => {
    setLightTheme();
  });

  themeIconMoon.addEventListener('click', () => {
    setDarkTheme();
  });

  languageIconPT.addEventListener('click', () => {
    setLanguagePT();
  });

  languageIconEN.addEventListener('click', () => {
    setLanguageEN();
  });

  burgerMenuIcon.addEventListener('click', () => {
    if (mobileMenu.classList.contains('hidden-mobile-menu')) {
      mobileMenu.classList.remove('hidden-mobile-menu');
    }
  });

  closeIcon.addEventListener('click', () => {
    if (!mobileMenu.classList.contains('hidden-mobile-menu')) {
      mobileMenu.classList.add('hidden-mobile-menu');
    }
  });

  // Initialization of themes.
  initThemesAndLanguages();
</script>
